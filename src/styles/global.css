@import 'tailwindcss';
@import './variables/brand.css' layer(base);
@import './variables/alias.css' layer(base);
@import './variables/mapped.css' layer(base);
@import './base.css' layer(base);
@plugin '@egoist/tailwindcss-icons';
@plugin '@iconify/tailwind4';
@plugin '@tailwindcss/forms';

@theme inline {
    /* @link https://utopia.fyi/type/calculator?c=320,16,1.2,1200,18,1.25,7,2,768&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 */
    --text-step--2: clamp(0.6944rem, 0.6852rem + 0.0465vw, 0.72rem);
    --text-step--1: clamp(0.8333rem, 0.8091rem + 0.1212vw, 0.9rem);
    --text-step-0: clamp(1rem, 0.9545rem + 0.2273vw, 1.125rem);
    --text-step-1: clamp(1.2rem, 1.125rem + 0.375vw, 1.4063rem);
    --text-step-2: clamp(1.44rem, 1.3244rem + 0.5778vw, 1.7578rem);
    --text-step-3: clamp(1.728rem, 1.5574rem + 0.8532vw, 2.1973rem);
    --text-step-4: clamp(2.0736rem, 1.8289rem + 1.2236vw, 2.7466rem);
    --text-step-5: clamp(2.4883rem, 2.1447rem + 1.718vw, 3.4332rem);
    --text-step-6: clamp(2.986rem, 2.5112rem + 2.3737vw, 4.2915rem);
    --text-step-7: clamp(3.5832rem, 2.9355rem + 3.2386vw, 5.3644rem);

    /* @link https://utopia.fyi/space/calculator?c=320,16,1.2,1200,20,1.25,5,2,&s=0.75|0.5|0.25,1.5|2|3|4|6|8|12|16|24,s-l|m-s|s-xs&g=s,l,xl,12 */

    /* Space 3xs: 4px → 5px */
    --spacing-fluid-3xs: clamp(0.25rem, 0.2273rem + 0.1136vw, 0.3125rem);
    /* Space 2xs: 8px → 10px */
    --spacing-fluid-2xs: clamp(0.5rem, 0.4545rem + 0.2273vw, 0.625rem);
    /* Space xs: 12px → 15px */
    --spacing-fluid-xs: clamp(0.75rem, 0.6818rem + 0.3409vw, 0.9375rem);
    /* Space s: 16px → 20px */
    --spacing-fluid-s: clamp(1rem, 0.9091rem + 0.4545vw, 1.25rem);
    /* Space m: 24px → 30px */
    --spacing-fluid-m: clamp(1.5rem, 1.3636rem + 0.6818vw, 1.875rem);
    /* Space l: 32px → 40px */
    --spacing-fluid-l: clamp(2rem, 1.8182rem + 0.9091vw, 2.5rem);
    /* Space xl: 48px → 60px */
    --spacing-fluid-xl: clamp(3rem, 2.7273rem + 1.3636vw, 3.75rem);
    /* Space 2xl: 64px → 80px */
    --spacing-fluid-2xl: clamp(4rem, 3.6364rem + 1.8182vw, 5rem);
    /* Space 3xl: 96px → 120px */
    --spacing-fluid-3xl: clamp(6rem, 5.4545rem + 2.7273vw, 7.5rem);
    /* Space 4xl: 128px → 160px */
    --spacing-fluid-4xl: clamp(8rem, 7.2727rem + 3.6364vw, 10rem);
    /* Space 5xl: 192px → 240px */
    --spacing-fluid-5xl: clamp(12rem, 10.9091rem + 5.4545vw, 15rem);
    /* Space 6xl: 256px → 320px */
    --spacing-fluid-6xl: clamp(16rem, 14.5455rem + 7.2727vw, 20rem);
    /* Space 7xl: 384px → 480px */
    --spacing-fluid-7xl: clamp(24rem, 21.8182rem + 10.9091vw, 30rem);

    /* One-up pairs */
    /* Space 3xs-2xs: 4px → 10px */
    --spacing-fluid-3xs-2xs: clamp(0.25rem, 0.1136rem + 0.6818vw, 0.625rem);
    /* Space 2xs-xs: 8px → 15px */
    --spacing-fluid-2xs-xs: clamp(0.5rem, 0.3409rem + 0.7955vw, 0.9375rem);
    /* Space xs-s: 12px → 20px */
    --spacing-fluid-xs-s: clamp(0.75rem, 0.5682rem + 0.9091vw, 1.25rem);
    /* Space s-m: 16px → 30px */
    --spacing-fluid-s-m: clamp(1rem, 0.6818rem + 1.5909vw, 1.875rem);
    /* Space m-l: 24px → 40px */
    --spacing-fluid-m-l: clamp(1.5rem, 1.1364rem + 1.8182vw, 2.5rem);
    /* Space l-xl: 32px → 60px */
    --spacing-fluid-l-xl: clamp(2rem, 1.3636rem + 3.1818vw, 3.75rem);
    /* Space xl-2xl: 48px → 80px */
    --spacing-fluid-xl-2xl: clamp(3rem, 2.2727rem + 3.6364vw, 5rem);
    /* Space 2xl-3xl: 64px → 120px */
    --spacing-fluid-2xl-3xl: clamp(4rem, 2.7273rem + 6.3636vw, 7.5rem);
    /* Space 3xl-4xl: 96px → 160px */
    --spacing-fluid-3xl-4xl: clamp(6rem, 4.5455rem + 7.2727vw, 10rem);
    /* Space 4xl-5xl: 128px → 240px */
    --spacing-fluid-4xl-5xl: clamp(8rem, 5.4545rem + 12.7273vw, 15rem);
    /* Space 5xl-6xl: 192px → 320px */
    --spacing-fluid-5xl-6xl: clamp(12rem, 9.0909rem + 14.5455vw, 20rem);
    /* Space 6xl-7xl: 256px → 480px */
    --spacing-fluid-6xl-7xl: clamp(16rem, 10.9091rem + 25.4545vw, 30rem);

    /* Custom pairs */
    /* Space s-l: 16px → 40px */
    --spacing-fluid-s-l: clamp(1rem, 0.4545rem + 2.7273vw, 2.5rem);
    /* Space m-s: 24px → 20px */
    --spacing-fluid-m-s: clamp(1.25rem, 1.5909rem + -0.4545vw, 1.5rem);
    /* Space s-xs: 16px → 15px */
    --spacing-fluid-s-xs: clamp(0.9375rem, 1.0227rem + -0.1136vw, 1rem);

    /* Custom */
    --spacing-viewport-safe-inline: var(--viewport-safe-inline);
    --spacing-splash-overlap: calc(var(--spacing-fluid-3xl) * 2);
    --spacing-headerheight: var(--headerheight);
    --spacing-gutter: var(--gutter);
    --spacing-tramline: var(--tramline);
    --spacing-offset: var(--offset);
    --spacing-safe-top: var(--safe-top);
    --spacing-safe-inline: var(--safe-inline);

    --spacing-tight: 3px;
    --spacing-block: 40vw; /* 5:2 default block / cinema */
    --spacing-spread: 50vw; /* 2:1 */
    --spacing-square: 100vw; /* 1:1 */
    --spacing-widescreen: 56.25vw; /* 16:9 */
    --spacing-photo: 66.67vw; /* 3:2 */
    --spacing-portrait: 150vw; /* 2:3 */
    --spacing-tv: 75vw; /* 4:3 */
    --spacing-super16: 60vw; /* 5:3 mobile block image */

    --container-page: 87.5rem; /* 1400px */

    /* --- Wide (Landscape) --- */
    --aspect-cinema: 5 / 2; /* 2.50 - Ultra-wide / Panavision */
    --aspect-spread: 2 / 1; /* 2.00 - Double-square / Banner */
    --aspect-logo: 2 / 1; /* 2.00 - Branding standard */
    --aspect-widescreen: 16 / 9; /* 1.77 - Modern HD TV / Monitor */
    --aspect-super16: 5 / 3; /* 1.66 - Euro Cinema / 16mm film */
    --aspect-photo: 3 / 2; /* 1.50 - 35mm Film / DSLR */
    --aspect-tv: 4 / 3; /* 1.33 - Retro SD TV / iPad */
    --aspect-classic: 5 / 4; /* 1.25 - Vintage Photobox / 8x10 */

    /* --- Tall (Portrait) --- */
    --aspect-portrait: 2 / 3; /* 0.66 - Standard Vertical Photo */

    --gradient-banner: linear-gradient(
        179deg,
        var(--color-surface-raised) 50%,
        --alpha(var(--color-shadow-dark) / 15%) 51%,
        transparent 60%
    );

    --radius-tight: var(--spacing-tight);
    --radius-px: 1px;

    --font-weight-inherit: inherit;

    --text-shadow-headline:
        1px 1px 3px rgba(0, 0, 0, 0.15), 0 0 10px var(--tw-shadow-color);

    --shadow-icon: inset 0 2px 6px -1px var(--tw-shadow-color);

    --shadow-raised:
        0px 12px 10px -18px var(--tw-shadow-color),
        0px 8px 12px -4px var(--tw-shadow-color);

    --shadow-floated:
        0px 2px 1px -1px var(--color-shadow-light),
        inset 0px 3px 2px -1px --alpha(var(--color-shadow-dark) / 15%),
        0px 0px 6px 2px --alpha(var(--color-shadow-dark) / 20%);

    --shadow-overlay:
        0px 2px 10px -1px --alpha(var(--color-shadow-dark) / 10%),
        0px 0px 5px -1px --alpha(var(--color-shadow-dark) / 40%);

    --shadow-banner: -4px 0px 8px 4px var(--tw-shadow-color);

    --inset-shadow-hero:
        inset 0 75px 100px -25px var(--tw-inset-shadow-color),
        inset 0 2px 0px -1px var(--tw-inset-shadow-color);

    --inset-shadow-highlight: inset 0px 1px 0px 0px var(--shadow-light);
    --inset-shadow-stripe: inset 3px 0px 5px 0px var(--tw-inset-shadow-color);

    --drop-shadow-svg: 0px 0px 16px rgba(0, 0, 0, 0.1);
    --drop-shadow-logo: 0px 1px 0px var(--tw-shadow-color);

    --drop-shadow-brandlogo: 0px 1px 1px var(--tw-shadow-color);
    --drop-shadow-squircle: 0px 2px 1px var(--tw-shadow-color);

    --drop-shadow-icon: 0px 0px 2px var(--tw-shadow-color);
    --drop-shadow-overlay: 0px 0px 3px var(--tw-shadow-color);

    --drop-shadow-banner: 1px 1px 5px rgba(0, 0, 0, 0.12);
    --drop-shadow-transparent: 0 0 0 rgba(0, 0, 0, 0);

    /* --font-body: 'Inter Variable', 'sans-serif'; */
    --font-body: var(--font-inter);
    --font-display: var(--font-reddit-sans-condensed);
    --font-georgia: 'Georgia', 'Times New Roman', 'Times,serif';

    /* Semantic Tailwind variables | Loaded from Mapped with light/dark theme */
    --color-transparent: transparent;
    --color-banner: var(--banner-default);
    --color-banner-up: var(--banner-up);

    --color-link-hover: var(--links-primary-hover);
    --color-link: var(--links-primary);
    --color-link-focus: var(--links-primary-focus);

    --color-surface-raised: var(--surface-10);
    --color-surface: var(--surface-0);
    --color-surface-sunken: var(--surface--10);
    --color-surface-sunk: var(--surface--20);
    --color-surface-bedrock: var(--surface-bedrock);
    --color-surface-brand: var(--surface-brand);
    --color-surface-footer: var(--surface-footer);
    --color-surface-underlay-light: var(--surface-underlay-light);
    --color-surface-underlay-dark: var(--surface-underlay-dark);
    --color-surface-overlay-light: var(--surface-overlay-light);
    --color-surface-overlay-dark: var(--surface-overlay-dark);

    --color-action: var(--action-default);
    --color-action-light: var(--action-light);
    --color-action-dark: var(--action-dark);
    --color-action-shade: var(--action-shade);

    --color-primary: var(--primary-default);
    --color-primary-light: var(--primary-light);
    --color-primary-dark: var(--primary-dark);
    --color-primary-shade: var(--primary-shade);

    --color-secondary: var(--secondary-default);
    --color-secondary-light: var(--secondary-light);
    --color-secondary-dark: var(--secondary-dark);
    --color-secondary-shade: var(--secondary-shade);

    --color-tertiary: var(--tertiary-default);
    --color-tertiary-light: var(--tertiary-light);
    --color-tertiary-dark: var(--tertiary-dark);
    --color-tertiary-shade: var(--tertiary-shade);

    --color-disabled: var(--disabled-default);
    --color-disabled-light: var(--disabled-light);
    --color-disabled-dark: var(--disabled-dark);
    --color-disabled-shade: var(--disabled-shade);

    --color-shadow-light: var(--shadow-light);
    --color-shadow-dark: var(--shadow-dark);

    --color-line-whisper: var(--line-whisper);
    --color-line-quiet: var(--line-quiet);
    --color-line: var(--line-default);
    --color-line-loud: var(--line-loud);
    --color-line-shout: var(--line-shout);

    --color-content-light: var(--copy-light);
    --color-content-dark: var(--copy-dark);
    --color-content-whisper: var(--copy-whisper);
    --color-content-quiet: var(--copy-quiet);
    --color-content: var(--copy-default);
    --color-content-loud: var(--copy-loud);
    --color-content-shout: var(--copy-shout);
    --color-content-footer: var(--copy-light);
    --color-content-headline: var(--copy-headline);

    --color-info: var(--info-default);
    --color-info-shade: var(--info-shade);

    --color-note: var(--note-default);
    --color-note-shade: var(--note-shade);

    --color-attention: var(--attention-default);
    --color-attention-shade: var(--attention-shade);

    --color-featured: var(--featured-default);
    --color-featured-light: var(--featured-light);
    --color-featured-dark: var(--featured-dark);
    --color-featured-shade: var(--featured-shade);

    --color-warning: var(--warning-default);
    --color-warning-shade: var(--warning-shade);

    --color-hilite: var(--hilite-default);
    --color-focus: var(--focus-default);

    --grains-quiet: url('/images/grains-quiet.webp');
    --grains-default: url('/images/grains.webp');
    --grains-loud: url('/images/grains-loud.webp');

    --grains-dark-quiet: url('/images/grains-dark-quiet.webp');
    --grains-dark-default: url('/images/grains-dark.webp');
    --grains-dark-loud: url('/images/grains-dark-loud.webp');

    /* Animations */
    --animate-slide-left: slide-left 1s ease-in-out infinite;
    --animate-slide-left-infinite: slide-left 120s linear infinite;
    --animate-blink: blink 1s infinite;
    --animate-glimmer: blink 3s ease-in-out infinite;
    --animate-nudge-right: nudge-right 1s 2;
    --animate-nudge-down: nudge-down 1s 2;
    --animate-fade-in: wait 250ms, fade-in 1s ease-out 250ms;
    --animate-fade-out: wait 250ms, fade-out 1s ease-out 250ms;
    --animate-fade-in-up: fade-in-up 250ms ease-out forwards;
    --animate-fade-in-down: wait 100ms, fade-in-down 500ms ease-in-out 100ms;
    --animate-glitch: long-glitch 30s ease-out infinite;
    --animate-neon: neon-flicker 30s linear infinite;

    /* Animation Keyframes */
    @keyframes wait {
        0% {
            opacity: 0;
        }
        100% {
            opacity: 0;
        }
    }
    @keyframes slide-left {
        from {
            transform: translate3d(0, 0, 0);
        }
        to {
            transform: translate3d(-100%, 0, 0);
        }
    }

    @keyframes blink {
        0%,
        100% {
            opacity: 1;
        }
        50% {
            opacity: 0;
        }
    }

    @keyframes nudge-right {
        0%,
        100% {
            transform: translateX(0%);
            animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
        }
        50% {
            transform: translateX(25%);
            animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
        }
    }

    @keyframes nudge-down {
        0%,
        100% {
            transform: translateY(0%);
            animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
        }
        50% {
            transform: translateY(25%);
            animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
        }
    }

    @keyframes fade-in {
        0% {
            opacity: 0;
        }
        100% {
            opacity: 1;
        }
    }
    @keyframes fade-out {
        0% {
            opacity: 1;
        }
        100% {
            opacity: 0;
        }
    }
    @keyframes fade-in-up {
        0% {
            opacity: 0;
            transform: translateY(50%);
        }
        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }
    @keyframes fade-in-down {
        0% {
            opacity: 0;
            transform: translateY(-10%);
        }
        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }
    @keyframes spin {
        100% {
            transform: rotate(1turn);
        }
    }
    @keyframes glitch-loop {
        0%,
        50% {
            filter: none;
        }
        50%,
        50.416% {
            filter: url(#distorted-rgb-glow);
        }
        50.416%,
        100% {
            filter: none;
        }
    }
    @keyframes neon-flicker {
        0%,
        5% {
            filter: url(#distorted-rgb-glow);
        }

        6%,
        10% {
            filter: none;
        }

        11%,
        12% {
            filter: url(#distorted-rgb-glow);
        }

        13%,
        20% {
            filter: none;
        }

        21%,
        22% {
            filter: url(#distorted-rgb-glow);
        }

        23%,
        35% {
            filter: none;
        }

        36%,
        36.5% {
            filter: url(#distorted-rgb-glow);
        }

        37%,
        45% {
            filter: none;
        }

        46%,
        46.5% {
            filter: url(#distorted-rgb-glow);
        }

        47%,
        60% {
            filter: none;
        }

        61%,
        61.5% {
            filter: url(#distorted-rgb-glow);
        }

        62%,
        80% {
            filter: none;
        }

        81%,
        81.5% {
            filter: url(#distorted-rgb-glow);
        }

        82%,
        100% {
            filter: none;
        }
    }
}

/* Specific Utilities 
------------------------------------------------------------ */

@utility external {
    @apply after:i-lucide-external-link after:text-step--1 after:ml-0.5 after:-translate-y-0.5;
}

@utility link {
    @apply text-link hover:text-link-hover font-medium decoration-solid decoration-2 hover:underline;
}

@utility hilite {
    padding: var(--spacing-fluid-3xs);
    color: var(--color-content-dark);
    border-radius: var(--radius-xs);
    background-color: var(--color-hilite);
    font-weight: var(--font-weight-medium);
}

@utility capline {
    @apply relative mb-[1em] before:absolute before:-bottom-[0.5em] before:left-0 before:w-[1.25em] before:border-b-[3px] before:border-b-teal-400;
}

@utility animation-pause {
    animation-play-state: paused;
}

@utility breakout {
    width: 100vw;
    max-width: none;
    position: relative;
    left: 50%;
    right: 50%;
    margin-inline: -50vw;
}

@utility bookmarkclip {
    clip-path: polygon(0 0, 100% 0, 100% 100%, 50% calc(100% - 10%), 0 100%);
}

/* @utility squircle {
    clip-path: shape(
        from 0 --value(--spacing-*, [length]),
        curve to --value(--spacing-*, [length]) 0 with 0 0 / 0 0,
        hline to calc(100% - --value(--spacing-*, [length])),
        curve to 100% --value(--spacing-*, [length]) with 100% 0 / 100% 0,
        vline to calc(100% - --value(--spacing-*, [length])),
        curve to calc(100% - --value(--spacing-*, [length])) 100% with 100% 100% /
            100% 100%,
        hline to --value(--spacing-*, [length]),
        curve to 0 calc(100% - --value(--spacing-*, [length])) with 0 100% / 0
            100%,
        close
    );
} */

@utility form-base {
    @apply rounded-tight border-line bg-surface-raised px-fluid-2xs py-fluid-2xs placeholder:text-content-quiet block border leading-normal ring-2 ring-transparent;
}

@utility form-focus {
    @apply focus:border-surface focus:ring-focus focus:outline-none;
}

@utility list-li-base {
    @apply before:w-fluid-m relative list-none pl-[1.5em] before:absolute before:left-0 before:top-0;
}

@utility list-li-bullet {
    @apply before:i-ci-dummy-square-small before:text-secondary before:translate-y-px before:text-[24px];
}
@utility list-li-checklist {
    @apply before:i-lucide-check-circle-2 before:h-auto before:min-h-[1.5em] before:w-[1em] before:text-teal-500;
}

@utility label-base {
    @apply rounded-tight px-fluid-3xs text-step--2/none inline-block border py-px align-text-bottom uppercase;
}

@utility container {
    padding-inline: clamp(
        0rem,
        calc(var(--viewport-safe-inline) - ((100vw - 87.5rem) / 2)),
        var(--viewport-safe-inline)
    );
    max-width: 87.5rem; /* 1400px */
}

/* prettier-ignore */
@utility grains-* {
    background-image: --value(--grains-*);
    background-repeat: repeat;
}

.squircle {
    --squircle-displacement: 25pt;

    clip-path: shape(
        from 0 var(--squircle-displacement),
        curve to var(--squircle-displacement) 0 with 0 0 / 0 0,
        hline to calc(100% - var(--squircle-displacement)),
        curve to 100% var(--squircle-displacement) with 100% 0 / 100% 0,
        vline to calc(100% - var(--squircle-displacement)),
        curve to calc(100% - var(--squircle-displacement)) 100% with 100% 100% /
            100% 100%,
        hline to var(--squircle-displacement),
        curve to 0 calc(100% - var(--squircle-displacement)) with 0 100% / 0
            100%,
        close
    );
}

/* prettier-ignore */
@utility squircle-* {
    clip-path: shape(
        from 0 --value(--spacing-*, [length]),
        curve to --value(--spacing-*, [length]) 0 with 0 0 / 0 0,
        hline to calc(100% - --value(--spacing-*, [length])),
        curve to 100% --value(--spacing-*, [length]) with 100% 0 / 100% 0,
        vline to calc(100% - --value(--spacing-*, [length])),
        curve to calc(100% - --value(--spacing-*, [length])) 100% with 100% 100% /
            100% 100%,
        hline to --value(--spacing-*, [length]),
        curve to 0 calc(100% - --value(--spacing-*, [length])) with 0 100% / 0
            100%,
        close
    );
}

/* prettier-ignore */
@utility chunkyline-* {
  background-image:linear-gradient(180deg, transparent 50%, --value(--color-*) 50%, --value(--color-*) 90%, transparent 90%);
  /* box-decoration-break: clone; */
  /* -webkit-box-decoration-break: clone; */
  display: inline;
}

/* prettier-ignore */
@utility angleclip-* {
  clip-path: polygon(0 0, 100% 0, 100% 100%, 0% calc(100% - --value(--spacing-*, [length])));
}
/* prettier-ignore */
@utility angleclip-tl-* {
  clip-path: polygon(0 --value(--spacing-*, [length]), 100% 0, 100% 100%, 0% 100% );
}
/* prettier-ignore */
@utility angleclip-tr-* {
  clip-path: polygon(0 0, 100% --value(--spacing-*, [length]), 100% 100%, 0% 100% );
}
/* prettier-ignore */
@utility angleclip-bl-* {
  clip-path: polygon(0 0, 100% 0, 100% 100%, 0% calc(100% - --value(--spacing-*, [length])));
}

/* prettier-ignore */
@utility angleclip-br-* {
  clip-path: polygon(0 0, 100% 0, 100% calc(100% - --value(--spacing-*, [length])), 0% 100%);
}

/* prettier-ignore */
@utility grid-areas-* {
    grid-template-areas: --value(--gta-*);
}

@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

@custom-variant mouse-only (@media screen and (pointer: fine));

@custom-variant svgpath {
    path {
        @slot;
    }
}

@custom-variant img {
    img {
        @slot;
    }
}

@custom-variant permalink {
    h1,
    h2 {
        @slot;
    }
}

@custom-variant dynamic {
    @supports (height: 100dvh) {
        @slot;
    }
}

@custom-variant x-cloak {
    [x-cloak] {
        @slot;
    }
}

@custom-variant cloaked {
    &:where([data-cloaked], [data-cloaked] *) {
        @slot;
    }
}

@custom-variant after-block (
  & + :is(h1,h2,h3,h4,h5,h6,p,div,section,article,ul,ol,figure):not(script):not(style),
  & + script + :is(h1,h2,h3,h4,h5,h6,p,div,section,article,ul,ol,figure)
);

/* Layer | Utilities
------------------------------------------------------------ */
@layer utilities {
}

/* Layer | Components
------------------------------------------------------------ */
@layer components {
    .layout > * {
        grid-column: full;
    }

    .layout {
        --content-max: max(47.5rem, 64ch);
        --content-width: min(
            var(--content-max),
            calc(100% - var(--viewport-safe-inline) * 2)
        );

        --gtc-layout: [full-start] 1fr [content-start] var(--content-width)
            [content-end] 1fr [full-end];
    }

    [data-layout='content'] {
        --gtc-layout: [full-start] 1fr [content-start] var(--content-width)
            [content-end] 1fr [full-end];
    }

    [data-layout='page'] {
        --content-max: min(100% - (var(--safe-inline) * 2), 87.5rem);
        --gtc-layout: [full-start] 1fr [content-start] var(--content-width)
            [content-end] 1fr [full-end];
    }

    :where([data-layout='content'], [data-layout='page'])
        > :where(.grid-cols-subgrid, .rte)
        > :not(
            .sticky,
            [class*='col-[full'],
            [class*='col-[pullout'],
            iframe,
            article
        ) {
        grid-column: content;
        z-index: var(--z-content);
    }

    /*--- Forms --- */
    .form__input,
    .form__select,
    .form__textarea {
        @apply form-base form-focus;
    }

    .form__input,
    .form__select,
    .form__textarea,
    .form__checkbox {
        &.error {
            @apply ring-attention border-transparent;
        }
    }
    .error__label {
        @apply bg-attention text-step--2/none p-fluid-3xs rounded-tight text-content-dark inline-block;
    }

    .form__input,
    .form__select {
        &:read-only {
            @apply border-line-quiet bg-line-whisper focus:border-line-quiet focus:bg-line-whisper focus:outline-hidden pointer-events-none select-none focus:ring-0;
        }
    }

    .form__checkbox {
        @apply form-focus rounded-xs border-line text-secondary border p-2;
    }

    .form__radio {
        @apply form-focus border-line text-secondary border p-2;
    }

    /*--- Lists ---*/
    .list {
        @apply pl-0! space-y-fluid-xs;
        li {
            @apply list-li-base;
        }
    }

    .list--bullet li {
        @apply list-li-bullet;
        li {
            @apply before:i-lucide-minus;
        }
    }
    .list--checklist li {
        @apply list-li-checklist;
    }
    .list--counter {
        --counter-name: count;
        counter-reset: var(--count);
        list-style: none;
        & > li {
            @apply pl-fluid-m relative;
            counter-increment: var(--counter-name);
            &::before {
                @apply text-secondary w-fluid-m font-medium;
                content: counters(var(--counter-name), '.') '. ';
            }
        }
    }

    /*--- Tables ---*/
    .table thead {
        text-align: left;
        font-weight: var(--font-weight-bold);
        white-space: nowrap;
    }

    .table th {
        padding-bottom: var(--spacing-fluid-2xs);
        border-bottom-width: 1px;
        padding-top: calc(var(--spacing) * 0);
    }

    .table th,
    .table tbody td {
        padding-block: calc(var(--spacing) * 1);
        vertical-align: top;
    }

    .table--rows tr {
        border-bottom-width: 1px;
        border-color: var(--color-line);
        &:last-child {
            border-width: 0px;
        }
    }

    .table--padded th,
    .table--padded tbody td {
        padding-block: var(--spacing-fluid-2xs);
        padding-left: var(--spacing-fluid-2xs);
        @apply lg:pl-fluid-xs;
    }
    .table--padded tr th,
    .table--padded tr td {
        &:last-child {
            padding-right: var(--spacing-fluid-2xs);
        }
        @apply lg:last:pr-fluid-xs;
    }

    .table--noindent tr td,
    .table--noindent thead th {
        &:last-child {
            padding-left: calc(var(--spacing) * 0);
        }
        &:first-child {
            padding-right: calc(var(--spacing) * 0);
        }
    }

    /*--- Labels ---*/
    .label-info {
        @apply label-base;
        background-color: var(--color-info);
        color: var(--color-content-light);
        border-color: var(--color-info);
    }
    .label-code {
        @apply label-base;
        background-color: var(--color-surface-sunk);
        color: var(--color-content);
        border-color: var(--color-line);
    }
    .label-disabled {
        @apply label-base;
        background-color: var(--color-line-whisper);
        color: var(--color-line-loud);
        border-color: var(--color-line-quiet);
    }
    .label-alert {
        @apply label-base;
        background-color: var(--color-warning);
        color: var(--color-content-light);
        border-color: var(--color-warning);
    }

    /*--- Animation ---*/
    [data-animate] {
        opacity: 0;
    }

    /*--- Blockquotes ---*/
    blockquote {
        @apply my-fluid-l pl-fluid-xs font-georgia text-step-1 relative block text-left;
        &::before {
            @apply i-lucide-message-square-quote text-secondary block text-[1.5em] leading-none;
            content: '';
        }
        cite {
            @apply mt-fluid-xs text-step-0 leading-fluid-m text-content-quiet mb-0 not-italic;
        }
    }

    /*--- SVGs | folder: src/assets/svg ---*/
    .plusheap {
        background-image: var(--plus);
        background-repeat: repeat-x;
        background-size: 100%;
        background-position: center bottom;
    }

    .shader {
        background-image: var(--shader);
        background-repeat: repeat-y;
        background-size: 100%;
        background-position: center top;
    }

    /*--- Editorial ---*/

    .rte :where(a):not(:where(.not-rte, .not-rte *, [data-role='button'])) {
        @apply link;
    }

    .rte :not(:where(.not-rte, .not-rte *, h1, h2, h3, h4, h5, h6)) {
        @apply leading-relaxed;
    }

    .rte :where(h1, h2, h3, h4, h5, h6) {
        @apply leading-tight;
    }

    .rte :where(h1, h2, h3, h4, h5, h6):not(:first-child) {
        margin-top: 1.5em;
    }

    .rte :where(h1, h2, h3, h4, h5, h6) a {
        line-height: inherit;
    }
    /* .rte :where(p):not(:where(.not-rte, .not-rte *)):not(:last-child) {
        margin-bottom: var(--spacing-fluid-s);
    } */

    .rte > :last-child {
        margin-bottom: 0;
    }

    .rte pre {
        padding: var(--spacing-fluid-m);
    }

    .rte pre code {
        font-size: var(--text-step--1);
    }

    .rte :where(ul, ul > li):not(:where(.not-rte, .not-rte *)) {
        list-style-type: none;
    }

    .rte :where(ul):not(:where(.not-rte, .not-rte *, .list)):not([class]) {
        @apply pl-0! space-y-2;
        li {
            @apply list-li-base list-li-bullet;
        }
    }

    .rte :where(li):not(:where(.not-rte, .not-rte *, .list *)) {
        margin-block: var(--spacing-fluid-2xs);
    }

    .rte :where(ol, ol > li):not(:where(.not-rte, .not-rte *)) {
        list-style-type: decimal;
        padding-inline-start: var(--spacing-fluid-s);
    }

    .rte :where(ol > li):not(:where(.not-rte, .not-rte *)) {
        list-style-type: decimal;
        padding-inline-start: var(--spacing-fluid-2xs);
    }

    .rte :where(ul ul, ul ol, ol ul, ol ol):not(:where(.not-rte, .not-rte *)) {
        margin-block: var(--spacing-fluid-2xs);
    }

    .rte strong {
        font-weight: var(--font-weight-bold);
    }

    .rte :where(blockquote):not(:where(.not-rte, .not-rte *)) {
        border-color: var(--color-line);
        border-width: 0px;
        border-left-width: 3px;
        padding-inline-start: var(--spacing-fluid-m);
        padding-block: var(--spacing-fluid-2xs);
    }

    .rte :where(blockquote p):not(:where(.not-rte, .not-rte *)):last-child {
        margin-bottom: 0;
    }

    .rte :where(code):not(:where(.not-rte, .not-rte *, pre code)) {
        background: var(--color-surface-raised);
        margin: 1px;
        padding-inline: var(--spacing-fluid-3xs);
        padding-block: var(--spacing-fluid-3xs);
        border-radius: var(--radius-tight);
        line-height: var(--leading-tight);
        border: 1px solid var(--color-line-shout);
        font-weight: var(--font-weight-semibold);
        display: inline-block;
    }
}

/* These styles will always be included in the build and take precedence */
:root {
    --swiper-theme-color: var(--color-accent);
    --swiper-pagination-bullet-inactive-color: white;
    --swiper-pagination-bullet-inactive-opacity: 1;
}
.pswp {
    --pswp-bg: var(--color-slate-950);
}

/* Prism | New diff- syntax
---------------------------------------------------------------------------------*/
pre[class*='language-diff-'] {
    --code-padding: 1.25em;
    font-size: 8px;
    padding-left: var(--code-padding);
    padding-right: var(--code-padding);
}
.token.deleted {
    background-color: hsl(0, 51%, 37%);
}
.token.inserted {
    background-color: hsl(126, 31%, 39%);
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
    -webkit-user-select: none;
    user-select: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--code-padding);
    padding-top: 2px;
    padding-bottom: 2px;
    background-color: rgba(0, 0, 0, 0.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
    display: block;
    margin-left: calc(-1 * var(--code-padding));
    margin-right: calc(-1 * var(--code-padding));
    text-decoration: none; /* override del, ins, mark defaults */
    color: inherit; /* override del, ins, mark defaults */
}
