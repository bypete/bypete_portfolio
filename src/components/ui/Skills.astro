---
import type { HTMLAttributes } from 'astro/types';
interface Area {
    title: string;
    skills: string[];
    class?: string;
}

interface SkillsetProps {
    text?: string;
    icon?: string;
    heading?: string;
    shadow?: string;
    areas: Area[];
}

export interface Props extends HTMLAttributes<'div'> {
    breakout?: boolean;
    bg?: string;
    class?: string;
    skillset?: SkillsetProps;
}

const {
    breakout = false,
    class: className,
    bg = 'bg-slate-900',
    skillset,
    ...rest
} = Astro.props;
const { text, icon, heading, shadow, areas } = skillset as SkillsetProps;
---

<div
    class:list={[
        'not-prose p-fluid-m relative',
        className
            ? className
            : `shadow-inset ${
                  !breakout
                      ? '-mx-fluid-m my-fluid-xl @3xl:rounded'
                      : 'breakout'
              }`,
        bg,
    ]}
    {...rest}
>
    <div
        class:list={[
            'relative mx-auto max-w-3xl',
            heading || 'permalink:text-white',
        ]}
    >
        <slot />
        <ul
            class:list={[
                'gap-fluid-m grid grid-cols-1 lg:grid-cols-2',
                text || 'text-content-light',
                shadow || 'text-shadow-emboss shadow-black/25',
            ]}
        >
            {
                areas.map((area) => (
                    <li class:list={['list-none', area?.class]}>
                        <h3>{area.title}</h3>
                        <ul
                            class:list={[
                                'space-y-fluid-2xs',
                                icon || '[&>li]:before:text-white!',
                            ]}
                        >
                            {area.skills.map((skill) => (
                                <li class="pl-fluid-m before:i-lucide-check-circle-2 before:top-tight before:h-fluid-s before:w-fluid-s relative leading-normal before:absolute before:left-0 before:leading-normal">
                                    {skill}
                                </li>
                            ))}
                        </ul>
                    </li>
                ))
            }
        </ul>
    </div>
</div>
